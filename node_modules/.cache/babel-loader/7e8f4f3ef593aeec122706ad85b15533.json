{"ast":null,"code":"import _regeneratorRuntime from\"/home/ehsia/Desktop/react/15-cocktails/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ehsia/Desktop/react/15-cocktails/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ehsia/Desktop/react/15-cocktails/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import{useCallback}from'react';var url='https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';var AppContext=React.createContext();var AppProvider=function AppProvider(_ref){var children=_ref.children;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"a\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cocktails=_useState6[0],setCocktails=_useState6[1];var fetchDrinks=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data,drinks,newCocktails;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return fetch(\"\".concat(url).concat(searchTerm));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;drinks=data.drinks;if(drinks){newCocktails=drinks.map(function(item){var idDrink=item.idDrink,strDrink=item.strDrink,strDrinkThumb=item.strDrinkThumb,strAlcoholic=item.strAlcoholic,strGlass=item.strGlass;return{id:idDrink,name:strDrink,image:strDrinkThumb,info:strAlcoholic,glass:strGlass};});setCocktails(newCocktails);}else{setCocktails([]);}setLoading(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setLoading(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);})),[searchTerm]);useEffect(function(){fetchDrinks();},[searchTerm,fetchDrinks]);return/*#__PURE__*/React.createElement(AppContext.Provider,{value:{loading:loading,searchTerm:searchTerm,cocktails:cocktails,setSearchTerm:setSearchTerm}},children);};// make sure use\nexport var useGlobalContext=function useGlobalContext(){return useContext(AppContext);};export{AppContext,AppProvider};","map":{"version":3,"sources":["/home/ehsia/Desktop/react/15-cocktails/src/context.js"],"names":["React","useState","useContext","useEffect","useCallback","url","AppContext","createContext","AppProvider","children","loading","setLoading","searchTerm","setSearchTerm","cocktails","setCocktails","fetchDrinks","fetch","response","json","data","drinks","newCocktails","map","item","idDrink","strDrink","strDrinkThumb","strAlcoholic","strGlass","id","name","image","info","glass","console","log","useGlobalContext"],"mappings":"odAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,OAASC,WAAT,KAA4B,OAA5B,CAEA,GAAMC,CAAAA,GAAG,CAAG,2DAAZ,CACA,GAAMC,CAAAA,UAAU,CAAGN,KAAK,CAACO,aAAN,EAAnB,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,eACNR,QAAQ,CAAC,IAAD,CADF,wCAC7BS,OAD6B,eACpBC,UADoB,8BAEAV,QAAQ,CAAC,GAAD,CAFR,yCAE7BW,UAF6B,eAEjBC,aAFiB,8BAGFZ,QAAQ,CAAC,EAAD,CAHN,yCAG7Ba,SAH6B,eAGlBC,YAHkB,eAKpC,GAAMC,CAAAA,WAAW,CAAGZ,WAAW,sEAAC,yKAC9BO,UAAU,CAAC,IAAD,CAAV,CAD8B,sCAGLM,CAAAA,KAAK,WAAIZ,GAAJ,SAAUO,UAAV,EAHA,QAGtBM,QAHsB,qCAITA,CAAAA,QAAQ,CAACC,IAAT,EAJS,QAItBC,IAJsB,eAKpBC,MALoB,CAKTD,IALS,CAKpBC,MALoB,CAM5B,GAAIA,MAAJ,CAAY,CACJC,YADI,CACWD,MAAM,CAACE,GAAP,CAAW,SAACC,IAAD,CAAU,IAChCC,CAAAA,OADgC,CAC6BD,IAD7B,CAChCC,OADgC,CACvBC,QADuB,CAC6BF,IAD7B,CACvBE,QADuB,CACbC,aADa,CAC6BH,IAD7B,CACbG,aADa,CACEC,YADF,CAC6BJ,IAD7B,CACEI,YADF,CACgBC,QADhB,CAC6BL,IAD7B,CACgBK,QADhB,CAExC,MAAO,CACLC,EAAE,CAAEL,OADC,CAELM,IAAI,CAAEL,QAFD,CAGLM,KAAK,CAAEL,aAHF,CAILM,IAAI,CAAEL,YAJD,CAKLM,KAAK,CAAEL,QALF,CAAP,CAOD,CAToB,CADX,CAWVd,YAAY,CAACO,YAAD,CAAZ,CACD,CAZD,IAYO,CACLP,YAAY,CAAC,EAAD,CAAZ,CACD,CACDJ,UAAU,CAAC,KAAD,CAAV,CArB4B,iFAuB5BwB,OAAO,CAACC,GAAR,cACAzB,UAAU,CAAC,KAAD,CAAV,CAxB4B,qEAAD,GA0B5B,CAACC,UAAD,CA1B4B,CAA/B,CA4BAT,SAAS,CAAC,UAAM,CACda,WAAW,GACZ,CAFQ,CAEN,CAACJ,UAAD,CAAaI,WAAb,CAFM,CAAT,CAIA,mBAAO,oBAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAE,CACjCN,OAAO,CAAPA,OADiC,CACxBE,UAAU,CAAVA,UADwB,CACZE,SAAS,CAATA,SADY,CACDD,aAAa,CAAbA,aADC,CAA5B,EAEHJ,QAFG,CAAP,CAGD,CAxCD,CAyCA;AACA,MAAO,IAAM4B,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CACpC,MAAOnC,CAAAA,UAAU,CAACI,UAAD,CAAjB,CACD,CAFM,CAIP,OAASA,UAAT,CAAqBE,WAArB","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport { useCallback } from 'react'\n\nconst url = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s='\nconst AppContext = React.createContext()\n\nconst AppProvider = ({ children }) => {\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState(\"a\");\n  const [cocktails, setCocktails] = useState([]);\n\n  const fetchDrinks = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`${url}${searchTerm}`)\n      const data = await response.json();\n      const { drinks } = data;\n      if (drinks) {\n        const newCocktails = drinks.map((item) => {\n          const { idDrink, strDrink, strDrinkThumb, strAlcoholic, strGlass } = item;\n          return {\n            id: idDrink,\n            name: strDrink,\n            image: strDrinkThumb,\n            info: strAlcoholic,\n            glass: strGlass,\n          }\n        });\n        setCocktails(newCocktails);\n      } else {\n        setCocktails([])\n      }\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n    }\n  }, [searchTerm])\n\n  useEffect(() => {\n    fetchDrinks()\n  }, [searchTerm, fetchDrinks])\n\n  return <AppContext.Provider value={{\n    loading, searchTerm, cocktails, setSearchTerm\n  }}>{children}</AppContext.Provider>\n}\n// make sure use\nexport const useGlobalContext = () => {\n  return useContext(AppContext)\n}\n\nexport { AppContext, AppProvider }\n"]},"metadata":{},"sourceType":"module"}